import{d as pe,r as w,L as de,c as Z,G as me,o as le,e as ge,t as S,v as L,x as c,M as O,B as ee,N as te,O as be,P as xe,y as we,Q as z,R as ye,z as Ce}from"./D0j20vpX.js";function I(e,t,l){return Math.max(t,Math.min(e,l))}function $e(e,t){if(typeof e=="string"||typeof t=="string")return e===t;for(const l in e)if(e[l]!==t[l])return!1;return!0}function P(e){const t=[],l=e.length>5?2:1;for(let o=1;o<e.length;o+=l){const i=e.substring(o,o+l).repeat(l%2+1),v=parseInt(i,16);t.push(o===3*l+1?v/255:v)}return t.length===3&&t.push(1),{r:t[0],g:t[1],b:t[2],a:t[3]}}function se(e){const t=e.l/100,l=t+e.s/100*Math.min(t,1-t),o=l===0?0:200*(1-t/l);return{h:e.h,s:o,v:l*100,a:e.a}}function D(e){let t=e.h%360;t<0&&(t+=360);const l=e.s/100,o=e.l/100;return{r:K(0,t,l,o)*255,g:K(8,t,l,o)*255,b:K(4,t,l,o)*255,a:e.a}}function K(e,t,l,o){const i=(e+t/30)%12,v=l*Math.min(o,1-o);return o-v*Math.max(-1,Math.min(i-3,9-i,1))}function re(e){const t=e.s/100,l=e.v/100,o=l*(1-t/2);return{h:e.h,s:o===0||o===1?0:(l-o)/Math.min(o,1-o)*100,l:o*100,a:e.a}}function ae(e){return{h:e.h,w:e.v*(100-e.s)/100,b:100-e.v,a:e.a}}function T(e){return D(re(e))}function N(e){const t=e.w/100,l=e.b/100;let o,i;const v=t+l;return v>=1?(o=0,i=t/v):(i=1-l,o=(1-t/i)*100),{h:e.h,s:o,v:i*100,a:e.a}}function V(e){const{r:t,g:l,b:o,a:i}=e,v=Math.min(t,l,o),p=Math.max(t,l,o),f=p-v,d=(p+v)/2;let h=0;f!==0&&(p===t?h=(l-o)/f+(l<o?6:0):p===l?h=(o-t)/f+2:p===o&&(h=(t-l)/f+4),h*=60);let a=0;return d!==0&&d!==255&&(a=(p-d)/Math.min(d,255-d)),{h,s:a*100,l:d/255*100,a:i}}function R(e){return"#"+Object.values(e).map((t,l)=>Math.round(l===3?t*255:t).toString(16).padStart(2,"0")).join("")}function F(e){return ae(se(V(e)))}const ke={hex:{hex:e=>e,hsl:e=>V(P(e)),hsv:e=>N(F(P(e))),hwb:e=>F(P(e)),rgb:P},hsl:{hex:e=>R(D(e)),hsl:e=>e,hsv:se,hwb:e=>F(D(e)),rgb:D},hsv:{hex:e=>R(T(e)),hsl:re,hsv:e=>e,hwb:ae,rgb:T},hwb:{hex:e=>R(T(N(e))),hsl:e=>V(T(N(e))),hsv:N,hwb:e=>e,rgb:e=>T(N(e))},rgb:{hex:R,hsl:V,hsv:e=>N(F(e)),hwb:F,rgb:e=>e}};function Se(e,t,l){return ke[e][t](l)}function Le(e,t){const l=e.toFixed(t);return l.includes(".")?l.replace(/\.?0+$/,""):l}const Me={deg:1,grad:.9,rad:180/Math.PI,turn:360},W={from(e){return e.endsWith("%")?E.from(e,{referenceValue:1}):C.from(e,{min:0,max:1})},to(e){return C.to(e)}},ne={from(e){const t=e.match(/deg|g?rad|turn$/);if(t===null)return C.from(e);const l=t[0];return C.from(e.slice(0,-l.length))*Me[l]},to(e){return C.to(e)}},C={from(e,{min:t=Number.NEGATIVE_INFINITY,max:l=Number.POSITIVE_INFINITY}={}){return e.endsWith(".")?NaN:I(Number(e),t,l)},to(e){return Le(e,2)}},E={from(e,{referenceValue:t=100,min:l=0,max:o=100}={}){return e.endsWith("%")?C.from(e.slice(0,-1),{min:l,max:o})*t/100:NaN},to(e){return C.to(e)+"%"}},Y={from(e){return e.endsWith("%")?E.from(e,{referenceValue:255}):C.from(e,{min:0,max:255})},to(e){return C.to(e)}},Ne={hsl:{h:ne,s:E,l:E,a:W},hwb:{h:ne,w:E,b:E,a:W},rgb:{r:Y,g:Y,b:Y,a:W}};function H(e,t){return Ne[e][t]}function G({format:e,color:t},l){if(e==="hex")return l&&[5,9].includes(t.length)?t.substring(0,t.length-(t.length-1)/4):t;const o=Object.entries(t).slice(0,l?3:4).map(([i,v])=>{const p=H(e,i);return(i==="a"?"/ ":"")+p.to(v)});return`${e}(${o.join(" ")})`}function ie(e){return/^#(?:(?:[A-F0-9]{2}){3,4}|[A-F0-9]{3,4})$/i.test(e)}function Ee(e){return"r"in e?"rgb":"w"in e?"hwb":"v"in e?"hsv":"s"in e?"hsl":null}const oe={hsl:["h","s","l","a"],hwb:["h","w","b","a"],rgb:["r","g","b","a"]};function Ae(e){if(typeof e!="string"){const f=Ee(e);return f===null?null:{format:f,color:e}}if(e.startsWith("#"))return ie(e)?{format:"hex",color:e}:null;if(!e.includes("(")){const f=document.createElement("canvas").getContext("2d");f.fillStyle=e;const d=f.fillStyle;return d==="#000000"&&e!=="black"?null:{format:"hex",color:d}}const[t,l]=e.split("("),o=t.substring(0,3);if(!(o in oe))return null;const i=l.replace(/[,/)]/g," ").replace(/\s+/g," ").trim().split(" ");i.length===3&&i.push("1");const v=oe[o],p=Object.fromEntries(v.map((f,d)=>{const h=H(o,f);return[f,h.from(i[d])]}));return{format:o,color:p}}function _e(e,t,l){const o=e.getBoundingClientRect(),i=t-o.left,v=l-o.top;return{x:o.width===0?0:I(i/o.width*100,0,100),y:o.height===0?0:I((1-v/o.height)*100,0,100)}}const Te={class:"vacp-range-input-group"},Fe=["for"],Ie={class:"vacp-range-input-label-text vacp-range-input-label-text--hue"},je=["id","value"],Oe=["for"],ze={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},Pe=["id","value"],Re=c("span",{class:"vacp-visually-hidden"},"Copy color",-1),De=c("svg",{class:"vacp-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 32 32"},[c("path",{d:"M25.313 28v-18.688h-14.625v18.688h14.625zM25.313 6.688c1.438 0 2.688 1.188 2.688 2.625v18.688c0 1.438-1.25 2.688-2.688 2.688h-14.625c-1.438 0-2.688-1.25-2.688-2.688v-18.688c0-1.438 1.25-2.625 2.688-2.625h14.625zM21.313 1.313v2.688h-16v18.688h-2.625v-18.688c0-1.438 1.188-2.688 2.625-2.688h16z",fill:"currentColor"})],-1),Ve={class:"vacp-color-inputs"},He={class:"vacp-color-input-group"},Be=["for"],Ue=c("span",{class:"vacp-color-input-label-text"}," Hex ",-1),Ke=["id","value"],We=["id","for","onInput"],Ye={class:"vacp-color-input-label-text"},Ge=["id","value","onInput"],Xe=c("span",{class:"vacp-visually-hidden"},"Switch format",-1),qe=c("svg",{class:"vacp-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[c("path",{d:"M8 15l5-5-1-1-4 2-4-2-1 1zm4-9l1-1-5-5-5 5 1 1 4-2z",fill:"currentColor"})],-1),Qe=pe({__name:"ColorPicker",props:{color:{default:"#ffffffff"},id:{default:"color-picker"},visibleFormats:{default:()=>["hex","hsl","hwb","rgb"]},defaultFormat:{default:"hsl"},alphaChannel:{default:"show"}},emits:["color-change"],setup(e,{emit:t}){const l=["hex","hsl","hsv","hwb","rgb"],o=e,i=t,v=w(null),p=w(null),f=w(null);let d=!1;const h=w(o.visibleFormats.includes(o.defaultFormat)?o.defaultFormat:o.visibleFormats[0]),a=de({hex:"#ffffffff",hsl:{h:0,s:0,l:100,a:1},hsv:{h:0,s:0,v:100,a:1},hwb:{h:0,w:100,b:0,a:1},rgb:{r:255,g:255,b:255,a:1}}),B=Z(function(){const n=Object.keys(a[h.value]);return h.value!=="hex"&&o.alphaChannel==="hide"?n.slice(0,3):n}),U=Z(function(){return o.alphaChannel==="hide"&&[5,9].includes(a.hex.length)?a.hex.substring(0,a.hex.length-(a.hex.length-1)/4):a.hex});me(()=>o.color,X),le(function(){document.addEventListener("mousemove",k,{passive:!1}),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),X(o.color)}),ge(function(){document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",A),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m)});function b(){const n=(o.visibleFormats.findIndex(s=>s===h.value)+1)%o.visibleFormats.length;h.value=o.visibleFormats[n]}function g(n){d=!0,k(n)}function x(n){d=!0,A(n)}function m(){d=!1}function k(n){n.buttons!==1||d===!1||!(p.value instanceof HTMLElement)||_(p.value,n.clientX,n.clientY)}function A(n){if(d===!1||!(p.value instanceof HTMLElement))return;n.preventDefault();const s=n.touches[0];_(p.value,s.clientX,s.clientY)}function _(n,s,r){const u=_e(n,s,r),y=Object.assign({},a.hsv);y.s=u.x,y.v=u.y,M("hsv",y)}function j(n){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(n.key))return;n.preventDefault();const s=["ArrowLeft","ArrowDown"].includes(n.key)?-1:1,r=["ArrowLeft","ArrowRight"].includes(n.key)?"s":"v",u=n.shiftKey?10:1,y=a.hsv[r]+s*u,$=Object.assign({},a.hsv);$[r]=I(y,0,100),M("hsv",$)}function X(n){const s=Ae(n);s!==null&&M(s.format,s.color)}function q(n,s){const r=n.currentTarget,u=Object.assign({},a.hsv);u[s]=Number(r.value),M("hsv",u)}function ce(n){const s=n.target;ie(s.value)&&M("hex",s.value)}function Q(n,s){const r=n.target,u=h.value,y=Object.assign({},a[u]),$=H(u,s).from(r.value);Number.isNaN($)||$===void 0||(y[s]=$,M(u,y))}function M(n,s){let r=s;if(o.alphaChannel==="hide")if(typeof s!="string")s.a=1,r=s;else if([5,9].includes(s.length)){const u=(s.length-1)/4;r=s.substring(0,s.length-u)+"f".repeat(u)}else[4,7].includes(s.length)&&(r=s+"f".repeat((s.length-1)/3));if(!$e(a[n],r)){a[n]=r;for(const u of l)u!==n&&(a[u]=Se(n,u,r));i("color-change",fe())}v.value instanceof HTMLElement&&p.value instanceof HTMLElement&&f.value instanceof HTMLElement&&ve(v.value,p.value,f.value)}async function ue(){const n=a[h.value],s=o.alphaChannel==="hide",r=G({color:n,format:h.value},s);await window.navigator.clipboard.writeText(r)}function he(n){const s=h.value;return H(s,n).to(a[s][n])}function ve(n,s,r){const u=G({format:"hsl",color:a.hsl},!1);n.style.setProperty("--vacp-color",u),s.style.position="relative",s.style.backgroundColor=`hsl(${a.hsl.h} 100% 50%)`,s.style.backgroundImage="linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)",r.style.boxSizing="border-box",r.style.position="absolute",r.style.left=`${a.hsv.s}%`,r.style.bottom=`${a.hsv.v}%`}function fe(){const n=o.alphaChannel==="hide",s=G({color:a[h.value],format:h.value},n);return{colors:a,cssColor:s}}function J(n){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(n.key)||!n.shiftKey)return;const s=n.currentTarget,r=Number(s.step),u=["ArrowLeft","ArrowDown"].includes(n.key)?-1:1,y=Number(s.value)+u*r*10,$=I(y,Number(s.min),Number(s.max));s.value=String($-u*r)}return(n,s)=>(S(),L("div",{ref_key:"colorPicker",ref:v,class:"vacp-color-picker"},[c("div",{ref_key:"colorSpace",ref:p,class:"vacp-color-space",onMousedown:g,onTouchstart:x},[c("div",{ref_key:"thumb",ref:f,class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:j},null,544)],544),c("div",Te,[c("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${n.id}-hue-slider`},[c("span",Ie,[O(n.$slots,"hue-range-input-label",{},()=>[ee("Hue")])]),c("input",{id:`${n.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:a.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:J,onInput:s[0]||(s[0]=r=>q(r,"h"))},null,40,je)],8,Fe),n.alphaChannel==="show"?(S(),L("label",{key:0,class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${n.id}-alpha-slider`},[c("span",ze,[O(n.$slots,"alpha-range-input-label",{},()=>[ee("Alpha")])]),c("input",{id:`${n.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:a.hsv.a,type:"range",min:"0",max:"1",step:"0.01",onKeydownPassive:J,onInput:s[1]||(s[1]=r=>q(r,"a"))},null,40,Pe)],8,Oe)):te("",!0)]),c("button",{class:"vacp-copy-button",type:"button",onClick:ue},[O(n.$slots,"copy-button",{},()=>[Re,De])]),c("div",Ve,[c("div",He,[h.value==="hex"?(S(),L("label",{key:0,class:"vacp-color-input-label",for:`${n.id}-color-hex`},[Ue,c("input",{id:`${n.id}-color-hex`,class:"vacp-color-input",type:"text",value:U.value,onInput:ce},null,40,Ke)],8,Be)):(S(!0),L(be,{key:1},xe(B.value,r=>(S(),L("label",{id:`${n.id}-color-${h.value}-${r}-label`,key:`${n.id}-color-${h.value}-${r}-label`,class:"vacp-color-input-label",for:`${n.id}-color-${h.value}-${r}`,onInput:u=>Q(u,r)},[c("span",Ye,we(r.toUpperCase()),1),c("input",{id:`${n.id}-color-${h.value}-${r}`,class:"vacp-color-input",type:"text",value:he(r),onInput:u=>Q(u,r)},null,40,Ge)],40,We))),128))]),n.visibleFormats.length>1?(S(),L("button",{key:0,class:"vacp-format-switch-button",type:"button",onClick:b},[O(n.$slots,"format-switch-button",{},()=>[Xe,qe])])):te("",!0)])],512))}}),Je={class:"flex items-start justify-between px-4 max-w-[1920px] pb-[64px]"},Ze={class:"flex-none"},et=["innerHTML"],tt={class:"pl-2"},nt={class:"fixed flex bottom-0 left-0 right-0 p-2"},lt={__name:"index",setup(e){const t=w(!0),l=w("rgb(255 255 255 / 1)");w(-1);const o=b=>{l.value=b.cssColor,i.value&&B(i.value)},i=w(""),v=b=>{if(i.value=b.target,i.value){let g=i.value.getAttribute("fill");if(!g){const x=i.value.classList[0];if(x){const m=d.value.find(k=>k.selectorText===`.${x}`&&k.style.fill);m&&(l.value=m.style.fill)}}g&&(l.value=g)}},p=b=>{const g=b.target.files[0];if(g&&g.type==="image/svg+xml"){const x=new FileReader;x.onload=m=>{f.value=m.target.result},x.readAsText(g)}else alert("Please upload a valid SVG file.")};w([]);const f=w(""),d=w([]),h=w([]),a=w("");le(async()=>{const x=await(await fetch("test.svg")).text();if(x){const m=new DOMParser;a.value=m.parseFromString(x,"image/svg+xml"),a.value.querySelectorAll("style").forEach(A=>{const _=new CSSStyleSheet;_.replaceSync(A.textContent),Array.from(_.cssRules).forEach(j=>{d.value.push(j),h.value.push(j.style.fill)})}),f.value=new XMLSerializer().serializeToString(a.value.documentElement)}});const B=b=>{b.setAttribute("class",""),b.setAttribute("fill",l.value)},U=()=>{const b=new XMLSerializer().serializeToString(document.querySelector("#svg-content svg")),g=new Blob([b],{type:"image/svg+xml"}),x=URL.createObjectURL(g),m=document.createElement("a");m.href=x,m.download="modified.svg",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(x)};return(b,g)=>(S(),L("div",null,[c("div",Je,[c("div",Ze,[c("div",{id:"svg-content",innerHTML:z(f),onClick:v},null,8,et)]),c("div",tt,[c("div",{class:ye(["overflow-hidden",{"h-0":!z(t)}])},[Ce(z(Qe),{"visible-formats":["rgb"],color:z(l),onColorChange:o},null,8,["color"])],2)])]),c("div",nt,[c("input",{class:"flex-1 cursor-pointer",type:"file",onChange:p,accept:".svg"},null,32),c("p",{class:"flex-1 p-2 text-center cursor-pointer inline-block mt-2 rounded-md bg-slate-700 text-white",onClick:g[0]||(g[0]=x=>U())},"Download SVG")])]))}};export{lt as default};
